<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/Jeffz-Android-Record-blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/Jeffz-Android-Record-blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/Jeffz-Android-Record-blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/Jeffz-Android-Record-blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/Jeffz-Android-Record-blog/css/main.css">


<link rel="stylesheet" href="/Jeffz-Android-Record-blog/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://exudeswarmth.github.io/Jeffz-Android-Record-blog').hostname,
    root: '/Jeffz-Android-Record-blog/',
    scheme: 'Gemini',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Jeffz 自留地博客">
<meta property="og:url" content="https://exudeswarmth.github.io/Jeffz-Android-Record-blog/index.html">
<meta property="og:site_name" content="Jeffz 自留地博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Jeffz">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://exudeswarmth.github.io/Jeffz-Android-Record-blog/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>Jeffz 自留地博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/Jeffz-Android-Record-blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jeffz 自留地博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/Jeffz-Android-Record-blog/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/Jeffz-Android-Record-blog/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://exudeswarmth.github.io/Jeffz-Android-Record-blog/2020/01/19/android-WebView-%E5%8A%A0%E8%BD%BD-html-%E7%89%87%E6%AE%B5%E6%97%B6%E5%AE%9E%E7%8E%B0%E6%9F%A5%E7%9C%8B%E5%85%B6%E4%B8%AD%E7%9A%84%E5%9B%BE%E7%89%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Jeffz-Android-Record-blog/images/avatar.gif">
      <meta itemprop="name" content="Jeffz">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jeffz 自留地博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/Jeffz-Android-Record-blog/2020/01/19/android-WebView-%E5%8A%A0%E8%BD%BD-html-%E7%89%87%E6%AE%B5%E6%97%B6%E5%AE%9E%E7%8E%B0%E6%9F%A5%E7%9C%8B%E5%85%B6%E4%B8%AD%E7%9A%84%E5%9B%BE%E7%89%87/" class="post-title-link" itemprop="url">android WebView 加载 html 片段时实现放大查看图片</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-19 19:40:21" itemprop="dateCreated datePublished" datetime="2020-01-19T19:40:21+08:00">2020-01-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-01-21 14:48:26" itemprop="dateModified" datetime="2020-01-21T14:48:26+08:00">2020-01-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="所需文件目录"><a href="#所需文件目录" class="headerlink" title="所需文件目录"></a>所需文件目录</h2><ul>
<li>AndroidManifest.xml</li>
<li>MainActivity.java</li>
<li>activity_main.xml</li>
<li>ShowWebImageActivity.java</li>
<li>activity_show_web_image.xml</li>
<li>view_pager_item.xml</li>
<li>fade_in.xml</li>
<li>fade_out.xml</li>
<li>colors.xml</li>
<li>strings.xml</li>
<li>styles.xml</li>
<li>app 中的 build.gradle</li>
</ul>
<h2 id="MainActivity-java"><a href="#MainActivity-java" class="headerlink" title="MainActivity.java"></a>MainActivity.java</h2><ul>
<li><p>设置 <code>WebView</code> 并加载 html 片段<br>在 <code>AndroidManifest.xml</code> 中加入 internet 访问权限，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:name&#x3D;&quot;android.permission.INTERNET&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>
<p><code>activity_main.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">WebView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/webView"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>初始化 <code>WebView</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_main);</span><br><span class="line">    initView();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 初始化视图</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    mWebView = findViewById(R.id.webView);</span><br><span class="line">    webViewSetUp();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 初始化 WebView</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressLint</span>(&#123;<span class="string">"SetJavaScriptEnabled"</span>, <span class="string">"ClickableViewAccessibility"</span>&#125;)</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">webViewSetUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// WebView 设置</span></span><br><span class="line">    WebSettings webSettings = mWebView.getSettings();</span><br><span class="line">    <span class="comment">// 启用 WebView JavaScript 功能</span></span><br><span class="line">    webSettings.setJavaScriptEnabled(<span class="keyword">true</span>);</span><br><span class="line">    <span class="comment">// 开启加载混合内容 (android 5.0 WebView 不能加载 http 与 https 混合内容)</span></span><br><span class="line">    webSettings.setMixedContentMode(WebSettings.MIXED_CONTENT_COMPATIBILITY_MODE);</span><br><span class="line"></span><br><span class="line">    mWebView.setWebViewClient(<span class="keyword">new</span> MyWebViewClient());</span><br><span class="line">    <span class="comment">// 添加自定义的 Javascript 接口，实现在 Javascript 中调用 Java 代码</span></span><br><span class="line">    mWebView.addJavascriptInterface(<span class="keyword">new</span> JavaScriptInterface(), <span class="string">"imageListener"</span>);</span><br><span class="line"></span><br><span class="line">    String data = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) &#123;</span><br><span class="line">        data = Html.fromHtml(html, Html.FROM_HTML_MODE_COMPACT).toString();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        data = Html.fromHtml(html).toString();</span><br><span class="line">    &#125;</span><br><span class="line">    mWebView.loadDataWithBaseURL(<span class="keyword">null</span>, data, <span class="string">"text/html"</span>, <span class="string">"utf-8"</span>, <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>MainActivity.java</code> 中定义内部类 <code>MyWebViewClient</code>，用于处理 <code>WebView</code> 中加载的 <code>img</code> 标签的图片尺寸以自适应手机，为 <code>img</code> 标签添加点击监听</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebViewClient</span> <span class="keyword">extends</span> <span class="title">WebViewClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageFinished</span><span class="params">(WebView view, String url)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">super</span>.onPageFinished(view, url);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 处理 webview 中 img 标签的图片大小</span></span><br><span class="line">        imgResize(view);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// html 加载完成之后，添加监听图片的点击 js 函数</span></span><br><span class="line">        addImageClickListener(view);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 处理图片尺寸自适应手机屏幕</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> view WebView</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">imgResize</span><span class="params">(WebView view)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        view.loadUrl(<span class="string">"javascript:(function() &#123;"</span></span><br><span class="line">                + <span class="string">"     var objs = document.getElementsByTagName('img'); "</span></span><br><span class="line">                + <span class="string">"     for (var i=0;i&lt;objs.length;i++) &#123;"</span></span><br><span class="line">                + <span class="string">"         var img = objs[i];"</span></span><br><span class="line">                + <span class="string">"         img.style.maxWidth = '100%';"</span></span><br><span class="line">                + <span class="string">"         img.style.height = 'auto';"</span></span><br><span class="line">                + <span class="string">"     &#125;"</span></span><br><span class="line">                + <span class="string">"   &#125;)()"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 这段js函数的功能是，遍历所有的img节点，并添加onclick函数，</span></span><br><span class="line"><span class="comment">     * onclick函数的功能是在图片点击的时候调用本地java接口并传递url</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> view WebView</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addImageClickListener</span><span class="params">(WebView view)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        view.loadUrl(<span class="string">"javascript:(function() &#123;"</span></span><br><span class="line">                + <span class="string">"     var objs = document.getElementsByTagName(\"img\"); "</span></span><br><span class="line">                + <span class="string">"     for(var i=0;i&lt;objs.length;i++) &#123;"</span></span><br><span class="line">                + <span class="string">"         window.imageListener.readImageUrl(objs[i].src);"</span></span><br><span class="line">                + <span class="string">"         objs[i].onclick=function() &#123;"</span></span><br><span class="line">                + <span class="string">"             window.imageListener.openImage(this.src);"</span></span><br><span class="line">                + <span class="string">"         &#125;"</span></span><br><span class="line">                + <span class="string">"     &#125;"</span></span><br><span class="line">                + <span class="string">"  &#125;)()"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><code>MainActivity.java</code> 中定义内部类 <code>JavaScriptInterface</code>，用于处理 <code>WebView</code> 中 <code>img</code> 标签的点击事件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">JavaScriptInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; images = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将图片的 url 保存在 ArrayList 中</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> img 图片 url</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@JavascriptInterface</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readImageUrl</span><span class="params">(String img)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        images.add(img);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 点击图片回调方法</span></span><br><span class="line"><span class="comment">     * 必须添加注解,否则无法响应</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> img 图片 url</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@JavascriptInterface</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">openImage</span><span class="params">(String img)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        ArrayList&lt;String&gt; list = addImages();</span><br><span class="line">        <span class="keyword">for</span> (String url : list)</span><br><span class="line">            <span class="keyword">if</span> (url.equals(img)) index = list.indexOf(img);</span><br><span class="line"></span><br><span class="line">        Intent intent = <span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>, ShowWebImageActivity<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        Bundle bundle = <span class="keyword">new</span> Bundle();</span><br><span class="line">        bundle.putStringArrayList(<span class="string">"list_image"</span>, list);</span><br><span class="line">        bundle.putInt(<span class="string">"index"</span>, index);</span><br><span class="line">        intent.putExtra(<span class="string">"bundle"</span>, bundle);</span><br><span class="line">        startActivity(intent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 图片列表去重</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> list 图片列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ArrayList&lt;String&gt; <span class="title">addImages</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Set set = <span class="keyword">new</span> HashSet();</span><br><span class="line">        <span class="keyword">for</span> (String cd : images) &#123;</span><br><span class="line">            <span class="keyword">if</span> (set.add(cd)) &#123;</span><br><span class="line">                list.add(cd);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>MainActivity.java</code> 完整代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String html = <span class="string">"&lt;![CDATA[\n"</span> +</span><br><span class="line">            <span class="string">"&lt;blockquote class=\"doc-blockquote\"&gt; &lt;p&gt; &lt;strong&gt;仇恨会产生很多问题，不明确的标准也会。&lt;/strong&gt; &lt;/p&gt; &lt;/blockquote&gt; &lt;p&gt; &lt;span&gt;前些日子，游戏速通大会（Awesome Games Done Quick，简称AGDQ）在佛罗里达州奥兰多市落下帷幕。&lt;/span&gt; &lt;/p&gt; &lt;p&gt; AGDQ是一项颇有规模的民间游戏活动，具有十多年的历史，每隔半年召集玩家齐聚一堂，举行各种单机游戏的速通比赛。 &lt;/p&gt; &lt;p&gt; 作为一项慈善活动，AGDQ的官方速通比赛会在Twitch上进行直播，并通过直播来募集善款。筹集的善款一般会捐给一些治疗癌症的机构，如果碰上世界各地的一些大型灾害或是人祸，他们也会为其募捐。2011年，AGDQ曾为日本地震海啸筹集到25000美金的善款。 &lt;/p&gt; &lt;p class=\"picbox\"&gt; &lt;img src=\"https://alioss.yystv.cn/doc/6123/048b75b4eaf81b135a8cfbf28fe752ff.jpeg_mw680water\" width=\"980\" height=\"620\" /&gt; &lt;/p&gt; &lt;p&gt; 在刚刚结束的AGDQ，主办方就以累计筹集捐款313万美金的成绩，累计捐款人数超过35万人，创下了该活动举办以来募捐的最高纪录。 &lt;/p&gt; &lt;p&gt; 长期以来的优秀表现，让AGDQ在大众眼中树立了良好的公众形象。不过近期，一位参加《最终幻想8》速通比赛的玩家，似乎为AGDQ带来了许多复杂的声音。 &lt;/p&gt; &lt;p&gt; 1月8日，AGDQ的《最终幻想8》的速通比赛在Twitch上直播。而这场以接力形式进行，长达9小时的比赛直播中，先后有10万观众进入直播间。 &lt;/p&gt; &lt;p&gt; 许多人前来观看这场直播马拉松，是因为比赛前，有玩家发掘参赛者中的一位西班牙玩家Luzbelheim公开反对女权主义。 &lt;/p&gt; &lt;p class=\"picbox\"&gt; &lt;img src=\"https://alioss.yystv.cn/doc/6123/493ba2d14304b3b64634526e5fd82dfd.png_mw680water\" width=\"552\" height=\"512\" /&gt; &lt;/p&gt; &lt;p&gt; Luzbelheim（以下简称Luz）是反女权这件事其实也不算被“挖”出的黑历史，因为他将自己这一主张直接写在了Twiter账号简介里，打开他的Twiter首页就能看到。 &lt;/p&gt; &lt;p class=\"picbox\"&gt; &lt;img src=\"https://alioss.yystv.cn/doc/6123/86b812ba3802ac9a8ecb6ef46bd37f9b.png_mw680water\" width=\"600\" height=\"451\" /&gt; &lt;/p&gt; &lt;p style=\"text-align:center;\"&gt; &lt;span style=\"color:#B2B2B2;font-size:13px;\"&gt;“我讨厌女权主义”&lt;/span&gt; &lt;/p&gt; &lt;p&gt; Luz推特首页的这一句话，直接招致了玩家以及其他一些参赛者的不满。很快有网友通过Luz的社交账号的关注和言论，挖掘出他支持西班牙右翼党“VOX”的政治倾向。 &lt;/p&gt; &lt;p&gt; VOX曾经公开针对西班牙LGBT群体，这遭到了全世界LGBT群体的反感，因此Luz本人也受到了AGDQ部分参赛者和部分玩家的抵制。有些人认为他同样具有反同性恋等情节。 &lt;/p&gt; &lt;p&gt; 在他们看来，这种明目张胆给自己打上反女权标签的行为，无异于歧视女性，甚至支持VOX党的态度，有损AGDQ长期累积下来的名声。 &lt;/p&gt; &lt;p class=\"picbox\"&gt; &lt;img src=\"https://alioss.yystv.cn/doc/6123/1a415abeec5e16a747ca65ea7b72d9a3.png_mw680water\" width=\"591\" height=\"603\" /&gt; &lt;/p&gt; &lt;p style=\"text-align:center;\"&gt; &lt;span style=\"color:#B2B2B2;font-size:13px;\"&gt;“如果你打算观看这场9小时的《最终幻想8》速通比赛，请你考虑一下这位选手西班牙右翼党VOX身份，以及他尴尬的个人简介。&lt;/span&gt;&lt;span style=\"color:#B2B2B2;font-size:13px;\"&gt;”&lt;/span&gt; &lt;/p&gt; &lt;p class=\"picbox\"&gt; &lt;img src=\"https://alioss.yystv.cn/doc/6123/4c1baff932f0b795bff13d2987406c4b.png_mw680water\" width=\"601\" height=\"206\" /&gt; &lt;/p&gt; &lt;p style=\"text-align:center;\"&gt; &lt;span style=\"color:#B2B2B2;font-size:13px;\"&gt;“不要去看《最终幻想8》的速通比赛，参赛者中有一个欧洲纳粹，他在Twiter简介里说自己讨厌女性。&lt;/span&gt;&lt;span style=\"color:#B2B2B2;font-size:13px;\"&gt;”&lt;/span&gt; &lt;/p&gt; &lt;p&gt; 同样参加游戏比赛的玩家StebMcDreb在比赛前接受媒体采访时表示“我不太可能参加活动，因为我不愿意和那些认为我（同性恋）身份是个笑话的人共处一室。” &lt;/p&gt; &lt;p&gt; 不过在一系列的声讨过后，这位Luz还是如愿参加了竞赛，并在10万观众面前与其他参赛者一起直播了《最终幻想8》的速通比赛。 &lt;/p&gt; &lt;p class=\"picbox\"&gt; &lt;img src=\"https://alioss.yystv.cn/doc/6123/233afd9f90db63e5f9f8421a5304d2de.png_mw680water\" width=\"561\" height=\"311\" /&gt; &lt;/p&gt; &lt;p&gt; 看到AGDQ在比赛开始前没有对&lt;span style=\"color:#000000;font-size:15px;\"&gt;Luz&lt;/span&gt;的立场作出任何判罚，对&lt;span style=\"color:#000000;font-size:15px;\"&gt;Luz&lt;/span&gt;表示反感的玩家在Twiter和Reddit上吵了起来，不少玩家甚至对活动主办方的不作为表示了失望，并采取了抵制措施。 &lt;/p&gt; &lt;p&gt; 很快，一些媒体因Luz一事，对AGDQ的参赛审核机制产生了怀疑。 &lt;/p&gt; &lt;p&gt; 在类似的问题上，AGDQ对待参加速通比赛的选手们一向苛刻。去年10月，《超级马里奥制造》著名玩家Trihex在社交媒体上告知粉丝，自己被活动主办方官方禁止参加2020年1月，也就是刚落幕的AGDQ。 &lt;/p&gt; &lt;p class=\"picbox\"&gt; &lt;img src=\"https://alioss.yystv.cn/doc/6123/0c0322753025fc4a0c914be067fb41c8.png_mw680water\" width=\"612\" height=\"381\" /&gt; &lt;/p&gt; &lt;p style=\"text-align:center;\"&gt; &lt;span style=\"color:#B2B2B2;font-size:13px;\"&gt;主播Trihex&lt;/span&gt; &lt;/p&gt; &lt;p&gt; Trihex之所以被禁止参加AGDQ，是因为2018年10月他曾在直播中使用了仇视同性恋的词汇。为此Trihex遭到了直播平台的封禁，不过令他没想到的是，一年之后，这项禁令延伸到了AGDQ这里。 &lt;/p&gt; &lt;p&gt; 这件事曾让AGDQ在玩家社区中备受好评。可是如今到了Luz这里，AGDQ的做法变成了一反常态的“纵容”。这让一些玩家和媒体感到不能理解。 &lt;/p&gt; &lt;p&gt; 媒体和玩家的态度似乎也影响了AGDQ官方的决断。 &lt;/p&gt; &lt;p&gt; 比赛结束后，Luz在推特上向自己的支持者们表示了感谢，这场因他而起波澜看似已经结束。 &lt;/p&gt; &lt;p&gt; 然而没多久，Luz就向媒体透露，自己在刚刚完成9小时的比赛后，被AGDQ活动创始人拉到了一旁。创始人告诉他，根据AGDQ最新规定，Luz将在未来18个月里不被允许参加AGDQ的活动。在Luz的再三追问下，对方才表示这和他Twiter上的表态以及政治倾向有关。 &lt;/p&gt; &lt;p&gt; Luz被禁止参加AGDQ的消息传开后，早已看他不顺眼的网友表示“干得漂亮”。 &lt;/p&gt; &lt;p class=\"picbox\"&gt; &lt;img src=\"https://alioss.yystv.cn/doc/6123/648bb36b2098587719270370b2306f34.png_mw680water\" width=\"726\" height=\"216\" /&gt; &lt;/p&gt; &lt;p style=\"text-align:center;\"&gt; &lt;span style=\"color:#B2B2B2;font-size:13px;\"&gt;来自西班牙网友解释了VOX与LGBT群体间的矛盾，并对禁赛的行为表示支持&lt;/span&gt; &lt;/p&gt; &lt;p&gt; 不过&lt;span style=\"color:#000000;font-size:15px;\"&gt;Luz&lt;/span&gt;的好友以及一些玩家则对&lt;span style=\"color:#000000;font-size:15px;\"&gt;Luz&lt;/span&gt;的遭遇有些费解。因为&lt;span style=\"color:#000000;font-size:15px;\"&gt;Luz&lt;/span&gt;除了在社交媒体上表达自己反感女权，并且转发过几个女权的表情图外，几乎从未有过什么反女权以及LGBT群体相关的行为或是言论，更谈不上极端的情绪和态度。 &lt;/p&gt; &lt;p class=\"picbox\"&gt; &lt;img src=\"https://alioss.yystv.cn/doc/6123/9ddff0ceefaf510e21581babb6214597.png_mw680water\" width=\"590\" height=\"241\" /&gt; &lt;/p&gt; &lt;p style=\"text-align:center;\"&gt; &lt;span style=\"color:#B2B2B2;font-size:13px;\"&gt;“两届GDQ以来他的Twiter介绍一直在那里，为什么现在变成了麻烦？&lt;/span&gt;&lt;span style=\"color:#B2B2B2;font-size:13px;\"&gt;”&lt;/span&gt; &lt;/p&gt; &lt;p&gt; 一位和Luz一起参加比赛的选手在接受采访时表示，自己从未见过Luz咄咄逼人，“我不相信他是个极端激进主义者，他不会轻易伤害别人。” &lt;/p&gt; &lt;p&gt; 如今，Luz与去年的Trihex的经历说相似又有着明显不同，但官方的态度变化如此之快此，令Luz感到委屈和不解。他认为自己受到了极大的误解，虽然对官方的处境表示理解，但他也很希望双方能坐下聊聊。“我想要一个解释”Luz这样说。 &lt;/p&gt; &lt;p&gt; AGDQ官方为了保持自己良好的形象，对于参赛者审查都相当严格，也会去浏览这些人的社交媒体。根据AGDQ的商业发展主管的解释，这一次因为Luz所造成的情况是他们忽略信息造成的。 &lt;/p&gt; &lt;p class=\"picbox\"&gt; &lt;img src=\"https://alioss.yystv.cn/doc/6123/fc40e5d5992b559c3f665ed5ac77b76e.png_mw680water\" width=\"637\" height=\"385\" /&gt; &lt;/p&gt; &lt;p&gt; 不可否认，Luz对待反女权等问题颇为轻率的态度成为了整件事的导火索，但媒体质疑AGDQ也不是毫无理由。 &lt;/p&gt; &lt;p&gt; 尽管AGDQ对舆论和保持自身形象怀有极为谨慎的态度，但其做法无论是站在哪一方看来，他们都有决断草率的嫌疑，正因如此，AGDQ官方的态度才会令人难以理解。但真正招致媒体对审核制度的质疑的原因，是AGDQ本身从未针对此类问题制定相关规则。 &lt;/p&gt; &lt;p&gt; 事实上，AGDQ自2016年起，每年都会禁止一些言行举止存在不良影响的玩家参加比赛。一位今年同样参加了AGDQ 2020的参赛者接受采访被问及此事，也向媒体抱怨道：“这种戏剧每年都在发生。” &lt;/p&gt;\n"</span> +</span><br><span class="line">            <span class="string">"]]&gt;"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> WebView mWebView;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        initView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化视图</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        mWebView = findViewById(R.id.webView);</span><br><span class="line">        webViewSetUp();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置WebView</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SuppressLint</span>(&#123;<span class="string">"SetJavaScriptEnabled"</span>, <span class="string">"ClickableViewAccessibility"</span>&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">webViewSetUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// WebView 设置</span></span><br><span class="line">        WebSettings webSettings = mWebView.getSettings();</span><br><span class="line">        <span class="comment">// 启用 WebView JavaScript 功能</span></span><br><span class="line">        webSettings.setJavaScriptEnabled(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 开启加载混合内容 (android 5.0 WebView 不能加载 http 与 https 混合内容)</span></span><br><span class="line">        webSettings.setMixedContentMode(WebSettings.MIXED_CONTENT_COMPATIBILITY_MODE);</span><br><span class="line"></span><br><span class="line">        mWebView.setWebViewClient(<span class="keyword">new</span> MyWebViewClient());</span><br><span class="line">        <span class="comment">// 添加自定义的 Javascript 接口，实现在 Javascript 中调用 Java 代码</span></span><br><span class="line">        mWebView.addJavascriptInterface(<span class="keyword">new</span> JavaScriptInterface(<span class="keyword">this</span>), <span class="string">"imageListener"</span>);</span><br><span class="line"></span><br><span class="line">        String data = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) &#123;</span><br><span class="line">            data = Html.fromHtml(html, Html.FROM_HTML_MODE_COMPACT).toString();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            data = Html.fromHtml(html).toString();</span><br><span class="line">        &#125;</span><br><span class="line">        mWebView.loadDataWithBaseURL(<span class="keyword">null</span>, data, <span class="string">"text/html"</span>, <span class="string">"utf-8"</span>, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebViewClient</span> <span class="keyword">extends</span> <span class="title">WebViewClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageFinished</span><span class="params">(WebView view, String url)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">super</span>.onPageFinished(view, url);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 处理 webview 中 img 标签的图片大小</span></span><br><span class="line">            imgResize(view);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// html 加载完成之后，添加监听图片的点击 js 函数</span></span><br><span class="line">            addImageClickListener(view);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 处理图片尺寸自适应手机屏幕</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> view WebView</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">imgResize</span><span class="params">(WebView view)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            view.loadUrl(<span class="string">"javascript:(function() &#123;"</span></span><br><span class="line">                    + <span class="string">"     var objs = document.getElementsByTagName('img'); "</span></span><br><span class="line">                    + <span class="string">"     for (var i=0;i&lt;objs.length;i++) &#123;"</span></span><br><span class="line">                    + <span class="string">"         var img = objs[i];"</span></span><br><span class="line">                    + <span class="string">"         img.style.maxWidth = '100%';"</span></span><br><span class="line">                    + <span class="string">"         img.style.height = 'auto';"</span></span><br><span class="line">                    + <span class="string">"     &#125;"</span></span><br><span class="line">                    + <span class="string">"   &#125;)()"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 这段js函数的功能是，遍历所有的img节点，并添加onclick函数，</span></span><br><span class="line"><span class="comment">         * onclick函数的功能是在图片点击的时候调用本地java接口并传递url</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> view WebView</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addImageClickListener</span><span class="params">(WebView view)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            view.loadUrl(<span class="string">"javascript:(function() &#123;"</span></span><br><span class="line">                    + <span class="string">"     var objs = document.getElementsByTagName(\"img\"); "</span></span><br><span class="line">                    + <span class="string">"     for(var i=0;i&lt;objs.length;i++) &#123;"</span></span><br><span class="line">                    + <span class="string">"         window.imageListener.readImageUrl(objs[i].src);"</span></span><br><span class="line">                    + <span class="string">"         objs[i].onclick=function() &#123;"</span></span><br><span class="line">                    + <span class="string">"             window.imageListener.openImage(this.src);"</span></span><br><span class="line">                    + <span class="string">"         &#125;"</span></span><br><span class="line">                    + <span class="string">"     &#125;"</span></span><br><span class="line">                    + <span class="string">"  &#125;)()"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">JavaScriptInterface</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> Context context;</span><br><span class="line">        <span class="keyword">private</span> List&lt;String&gt; images = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">JavaScriptInterface</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.context = context;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 将图片的 url 保存在 ArrayList 中</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> img 图片 url</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="meta">@JavascriptInterface</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readImageUrl</span><span class="params">(String img)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            images.add(img);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 点击图片回调方法</span></span><br><span class="line"><span class="comment">         * 必须添加注解,否则无法响应</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> img 图片 url</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="meta">@JavascriptInterface</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">openImage</span><span class="params">(String img)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">            ArrayList&lt;String&gt; list = addImages();</span><br><span class="line">            <span class="keyword">for</span> (String url : list)</span><br><span class="line">                <span class="keyword">if</span> (url.equals(img)) index = list.indexOf(img);</span><br><span class="line"></span><br><span class="line">            Intent intent = <span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>, ShowWebImageActivity<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">            Bundle bundle = <span class="keyword">new</span> Bundle();</span><br><span class="line">            bundle.putStringArrayList(<span class="string">"list_image"</span>, list);</span><br><span class="line">            bundle.putInt(<span class="string">"index"</span>, index);</span><br><span class="line">            intent.putExtra(<span class="string">"bundle"</span>, bundle);</span><br><span class="line">            startActivity(intent);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 图片列表去重</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span> list 图片列表</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> ArrayList&lt;String&gt; <span class="title">addImages</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            ArrayList&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            Set set = <span class="keyword">new</span> HashSet();</span><br><span class="line">            <span class="keyword">for</span> (String cd : images) &#123;</span><br><span class="line">                <span class="keyword">if</span> (set.add(cd)) &#123;</span><br><span class="line">                    list.add(cd);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> list;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ShowWebImageActivity-java"><a href="#ShowWebImageActivity-java" class="headerlink" title="ShowWebImageActivity.java"></a>ShowWebImageActivity.java</h2></li>
<li><p>新建 <code>ShowWebImageActivity.java</code><br><code>activity_show_web_image.xml</code> 如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    xmlns:tools&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;tools&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot;</span><br><span class="line">    tools:context&#x3D;&quot;.ShowWebImageActivity&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;androidx.viewpager.widget.ViewPager</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;viewPager&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;match_parent&quot; &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;androidx.constraintlayout.widget.ConstraintLayout&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>初始化 <code>activity</code> 进出动画<br>在 <code>res</code> 下新建文件夹 <code>anim</code>，在 <code>anim</code> 下添加动画文件 <code>fade_in.xml</code>, <code>fade_out.xml</code>。<br><code>fade_in.xml</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;alpha xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:fromAlpha&#x3D;&quot;0&quot;</span><br><span class="line">    android:toAlpha&#x3D;&quot;1&quot;</span><br><span class="line">    android:duration&#x3D;&quot;200&quot;</span><br><span class="line">    android:fillAfter&#x3D;&quot;true&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure>
<p><code>fade_out.xml</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;alpha xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:fromAlpha&#x3D;&quot;1&quot;</span><br><span class="line">    android:toAlpha&#x3D;&quot;0&quot;</span><br><span class="line">    android:duration&#x3D;&quot;200&quot;</span><br><span class="line">    android:fillAfter&#x3D;&quot;true&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure>
<p>在 <code>styles.xml</code> 中定义主题，添加以下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;style name&#x3D;&quot;transparent&quot; parent&#x3D;&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;</span><br><span class="line">    &lt;item name&#x3D;&quot;android:windowIsTranslucent&quot;&gt;true&lt;&#x2F;item&gt;</span><br><span class="line">    &lt;item name&#x3D;&quot;android:windowBackground&quot;&gt;@color&#x2F;translucent&lt;&#x2F;item&gt; &lt;!-- 透明度 --&gt;</span><br><span class="line">    &lt;item name&#x3D;&quot;android:windowNoTitle&quot;&gt;true&lt;&#x2F;item&gt; &lt;!-- 无标题 --&gt;</span><br><span class="line">    &lt;item name&#x3D;&quot;android:windowAnimationStyle&quot;&gt;@style&#x2F;Anim_Activity_fade_in_out&lt;&#x2F;item&gt;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line"></span><br><span class="line">  &lt;style name&#x3D;&quot;Anim_Activity_fade_in_out&quot; parent&#x3D;&quot;@android:style&#x2F;Animation.Activity&quot;&gt;</span><br><span class="line">      &lt;item name&#x3D;&quot;android:activityOpenEnterAnimation&quot;&gt;@anim&#x2F;fade_in&lt;&#x2F;item&gt;</span><br><span class="line">      &lt;item name&#x3D;&quot;android:activityOpenExitAnimation&quot;&gt;@anim&#x2F;fade_out&lt;&#x2F;item&gt;</span><br><span class="line">      &lt;item name&#x3D;&quot;android:activityCloseEnterAnimation&quot;&gt;@anim&#x2F;fade_in&lt;&#x2F;item&gt;</span><br><span class="line">      &lt;item name&#x3D;&quot;android:activityCloseExitAnimation&quot;&gt;@anim&#x2F;fade_out&lt;&#x2F;item&gt;</span><br><span class="line">  &lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<p><code>@color/translucent</code> 在 <code>colors.xml</code> 中定义，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;color name&#x3D;&quot;translucent&quot;&gt;#CC000000&lt;&#x2F;color&gt;</span><br></pre></td></tr></table></figure>
<p>在 <code>AndroidManifest.xml</code> 中使用上面定义的主题，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;activity android:name&#x3D;&quot;.ShowWebImageActivity&quot;</span><br><span class="line">            android:theme&#x3D;&quot;@style&#x2F;transparent&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure>
<p>在 <code>ShowWebImageActivity.java</code> 中初始化动画，分别在 <code>onCreate()</code>，<code>finish()</code> 中设置。如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_show_web_image);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置 activity 进入退出动画淡入淡出，进入时才有效果</span></span><br><span class="line">    overridePendingTransition(R.anim.fade_in, R.anim.fade_out);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finish</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.finish();</span><br><span class="line">    <span class="comment">// 设置 activity 进入退出动画淡入淡出，退出时才有效果</span></span><br><span class="line">    overridePendingTransition(R.anim.fade_in, R.anim.fade_out);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>初始化 <code>activity</code> 状态（全屏，状态栏）<br>在 <code>onCreate()</code> 中设置，如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_show_web_image);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 初始化 activity 状态</span></span><br><span class="line">        Window window = getWindow();</span><br><span class="line">        <span class="comment">// 全屏</span></span><br><span class="line">        window.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN</span><br><span class="line">                | View.SYSTEM_UI_FLAG_LAYOUT_STABLE);</span><br><span class="line">        <span class="comment">// 状态栏透明</span></span><br><span class="line">        window.setStatusBarColor(Color.TRANSPARENT);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>ShowWebImageActivity.java</code> 中定义内部类 <code>ViewPagerAdapter</code> 作为 <code>ViewPager</code> 的适配器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewPagerAdapter</span> <span class="keyword">extends</span> <span class="title">PagerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> images.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isViewFromObject</span><span class="params">(@NonNull View view, @NonNull Object object)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> view == object;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">instantiateItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        View view = View.inflate(ShowWebImageActivity.<span class="keyword">this</span>, R.layout.view_pager_item, <span class="keyword">null</span>);</span><br><span class="line">        PhotoView photoView = view.findViewById(R.id.photoview);</span><br><span class="line">        <span class="comment">// 点击图片退出 activity</span></span><br><span class="line">        photoView.setOnPhotoTapListener(<span class="keyword">new</span> PhotoViewAttacher.OnPhotoTapListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPhotoTap</span><span class="params">(View view, <span class="keyword">float</span> v, <span class="keyword">float</span> v1)</span> </span>&#123;</span><br><span class="line">                finish();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        photoView.setBackgroundColor(Color.TRANSPARENT);</span><br><span class="line"></span><br><span class="line">        TextView indicator = view.findViewById(R.id.indicator);</span><br><span class="line">        <span class="comment">// 用 Glide 加载图片</span></span><br><span class="line">        Glide.with(ShowWebImageActivity.<span class="keyword">this</span>).load(images.get(position)).into(photoView);</span><br><span class="line">        CharSequence text = getString(R.string.viewpager_indicator, position + <span class="number">1</span>, images.size());</span><br><span class="line">        <span class="comment">// 设置 indicator</span></span><br><span class="line">        indicator.setText(text);</span><br><span class="line">        container.addView(view, ViewPager.LayoutParams.MATCH_PARENT, ViewPager.LayoutParams.MATCH_PARENT);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroyItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position, @NonNull Object object)</span> </span>&#123;</span><br><span class="line">        container.removeView((View) object);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>ViewPagerAdapter</code> - <code>instantiateItem()</code> 中用到的 <code>PhotoView</code>, <code>Glide</code> 需在 <code>app</code> 的 <code>build.gradle</code> 中添加依赖，如下：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//图片选择控件</span></span><br><span class="line">    implementation <span class="string">'com.github.chrisbanes.photoview:library:1.2.4'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 图片加载</span></span><br><span class="line">    implementation <span class="string">'com.github.bumptech.glide:glide:4.11.0'</span></span><br><span class="line">    annotationProcessor <span class="string">'com.github.bumptech.glide:compiler:4.11.0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>ViewPagerAdapter</code> - <code>instantiateItem()</code> 中用到的 <code>R.layout.view_pager_item</code> 需在 <code>layout</code> 中新建布局文件 <code>view_pager_item.xml</code>，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;RelativeLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;match_parent&quot; &gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;indicator&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_alignParentBottom&#x3D;&quot;true&quot;</span><br><span class="line">        android:background&#x3D;&quot;@android:color&#x2F;transparent&quot;</span><br><span class="line">        android:gravity&#x3D;&quot;center&quot;</span><br><span class="line">        android:text&#x3D;&quot;%1$d&#x2F;%2$d&quot;</span><br><span class="line">        android:textColor&#x3D;&quot;@android:color&#x2F;white&quot;</span><br><span class="line">        android:textSize&#x3D;&quot;18sp&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;uk.co.senab.photoview.PhotoView</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;photoview&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;match_parent&quot; &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;RelativeLayout&gt;</span><br></pre></td></tr></table></figure>
<p><code>view_pager_item.xml</code> 中的 <code>@string/viewpager_indicator</code> 在 <code>strings.xml</code> 中定义，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;string name&#x3D;&quot;viewpager_indicator&quot;&gt;%1$d&#x2F;%2$d&lt;&#x2F;string&gt;</span><br></pre></td></tr></table></figure>
<p><code>ViewPagerAdapter</code> - <code>instantiateItem()</code> 中用到的 <code>images</code> 是 <code>ShowWebImageActivity.java</code> 的变量，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> ArrayList&lt;String&gt; images;</span><br></pre></td></tr></table></figure>
</li>
<li><p>初始化 <code>ViewPager</code> 用以显示图片</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_show_web_image);</span><br><span class="line"></span><br><span class="line">        ViewPager viewPager = findViewById(R.id.viewPager);</span><br><span class="line">        Bundle bundle = getIntent().getBundleExtra(<span class="string">"bundle"</span>);</span><br><span class="line">        images = bundle.getStringArrayList(<span class="string">"list_image"</span>);</span><br><span class="line">        <span class="keyword">int</span> index = bundle.getInt(<span class="string">"index"</span>);</span><br><span class="line">        viewPager.setAdapter(<span class="keyword">new</span> ViewPagerAdapter());</span><br><span class="line">        viewPager.setCurrentItem(index);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><code>ShowWebImageActivity.java</code> 完整代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShowWebImageActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;String&gt; images;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_show_web_image);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置 activity 进入退出动画淡入淡出，进入时才有效果</span></span><br><span class="line">        overridePendingTransition(R.anim.fade_in, R.anim.fade_out);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 初始化 activity 状态</span></span><br><span class="line">        Window window = getWindow();</span><br><span class="line">        <span class="comment">// 全屏</span></span><br><span class="line">        window.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN</span><br><span class="line">                | View.SYSTEM_UI_FLAG_LAYOUT_STABLE);</span><br><span class="line">        <span class="comment">// 状态栏透明</span></span><br><span class="line">        window.setStatusBarColor(Color.TRANSPARENT);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 初始化 ImageViewPager</span></span><br><span class="line">        ViewPager viewPager = findViewById(R.id.viewPager);</span><br><span class="line">        Bundle bundle = getIntent().getBundleExtra(<span class="string">"bundle"</span>);</span><br><span class="line">        images = bundle.getStringArrayList(<span class="string">"list_image"</span>);</span><br><span class="line">        <span class="keyword">int</span> index = bundle.getInt(<span class="string">"index"</span>);</span><br><span class="line">        viewPager.setAdapter(<span class="keyword">new</span> ViewPagerAdapter());</span><br><span class="line">        viewPager.setCurrentItem(index);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finish</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.finish();</span><br><span class="line">        <span class="comment">// 设置 activity 进入退出动画淡入淡出，退出时才有效果</span></span><br><span class="line">        overridePendingTransition(R.anim.fade_in, R.anim.fade_out);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ViewPagerAdapter</span> <span class="keyword">extends</span> <span class="title">PagerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> images.size();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isViewFromObject</span><span class="params">(@NonNull View view, @NonNull Object object)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> view == object;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@NonNull</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Object <span class="title">instantiateItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            View view = View.inflate(ShowWebImageActivity.<span class="keyword">this</span>, R.layout.view_pager_item, <span class="keyword">null</span>);</span><br><span class="line">            PhotoView photoView = view.findViewById(R.id.photoview);</span><br><span class="line">            <span class="comment">// 点击图片退出 activity</span></span><br><span class="line">            photoView.setOnPhotoTapListener(<span class="keyword">new</span> PhotoViewAttacher.OnPhotoTapListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPhotoTap</span><span class="params">(View view, <span class="keyword">float</span> v, <span class="keyword">float</span> v1)</span> </span>&#123;</span><br><span class="line">                    finish();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            photoView.setBackgroundColor(Color.TRANSPARENT);</span><br><span class="line"></span><br><span class="line">            TextView indicator = view.findViewById(R.id.indicator);</span><br><span class="line">            <span class="comment">// 用 Glide 加载图片</span></span><br><span class="line">            Glide.with(ShowWebImageActivity.<span class="keyword">this</span>).load(images.get(position)).into(photoView);</span><br><span class="line">            CharSequence text = getString(R.string.viewpager_indicator, position + <span class="number">1</span>, images.size());</span><br><span class="line">            <span class="comment">// 设置 indicator</span></span><br><span class="line">            indicator.setText(text);</span><br><span class="line">            container.addView(view, ViewPager.LayoutParams.MATCH_PARENT, ViewPager.LayoutParams.MATCH_PARENT);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> view;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroyItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position, @NonNull Object object)</span> </span>&#123;</span><br><span class="line">            container.removeView((View) object);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行 app 查看效果。</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://exudeswarmth.github.io/Jeffz-Android-Record-blog/2020/01/18/GitHub-Pages-Hexo-%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Jeffz-Android-Record-blog/images/avatar.gif">
      <meta itemprop="name" content="Jeffz">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jeffz 自留地博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/Jeffz-Android-Record-blog/2020/01/18/GitHub-Pages-Hexo-%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" class="post-title-link" itemprop="url">GitHub Pages + Hexo 搭建博客</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-18 14:01:16" itemprop="dateCreated datePublished" datetime="2020-01-18T14:01:16+08:00">2020-01-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-01-21 14:34:39" itemprop="dateModified" datetime="2020-01-21T14:34:39+08:00">2020-01-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li>GitHub 中创建博客 repo (仓库)，开启 GitHub Pages</li>
<li>安装 Hexo</li>
<li>创建一个 Hexo 项目，部署到 GitHub Pages</li>
</ol>
<h2 id="GitHub-中创建博客-repo，开启-GitHub-Pages"><a href="#GitHub-中创建博客-repo，开启-GitHub-Pages" class="headerlink" title="GitHub 中创建博客 repo，开启 GitHub Pages"></a>GitHub 中创建博客 repo，开启 GitHub Pages</h2><ol>
<li>注册 GitHub 账号<br><a href="https://github.com/" target="_blank" rel="noopener">GitHub 官网</a></li>
<li>创建 repository<img src="/Jeffz-Android-Record-blog/2020/01/18/GitHub-Pages-Hexo-%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/github-new-repository.png" class="" title="GitHub新建repo"></li>
<li>开启 GitHub Pages</li>
</ol>
<ul>
<li>进入刚创建的 repository - Settings - GitHub Pages - Source 设置为 master branch<img src="/Jeffz-Android-Record-blog/2020/01/18/GitHub-Pages-Hexo-%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/open-github-pages.png" class="" title="开启GitHub-Pages"></li>
<li>通过链接访问博客<img src="/Jeffz-Android-Record-blog/2020/01/18/GitHub-Pages-Hexo-%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/visit-blog.png" class="" title="访问博客">

</li>
</ul>
<h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><p><a href="https://hexo.io/" target="_blank" rel="noopener">Hexo 官方网站</a><br><a href="https://hexo.io/docs/" target="_blank" rel="noopener">Hexo 官方安装教程</a></p>
<h2 id="创建-Hexo-项目，部署到-GitHub-Pages"><a href="#创建-Hexo-项目，部署到-GitHub-Pages" class="headerlink" title="创建 Hexo 项目，部署到 GitHub Pages"></a>创建 Hexo 项目，部署到 GitHub Pages</h2><ol>
<li>创建 Hexo 项目<br><a href="https://hexo.io/docs/setup.html" target="_blank" rel="noopener">Hexo 官方建站教程</a></li>
<li>部署到 GitHub Pages<br><a href="https://hexo.io/docs/github-pages.html" target="_blank" rel="noopener">Hexo 官方部署 GitHub Pages 教程</a><br>手动部署教程</li>
</ol>
<ul>
<li>编辑项目根目录中的 <code>_config.yml</code> 文件<img src="/Jeffz-Android-Record-blog/2020/01/18/GitHub-Pages-Hexo-%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/config1.png" class="" title="配置信息">
<img src="/Jeffz-Android-Record-blog/2020/01/18/GitHub-Pages-Hexo-%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/config2.png" class="" title="配置信息"></li>
<li>部署<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以下命令需在项目根目录路径下执行</span></span><br><span class="line"><span class="comment"># 生成网站文件</span></span><br><span class="line">$ hexo g</span><br><span class="line"><span class="comment"># 部署到服务器</span></span><br><span class="line">$ hexo d</span><br></pre></td></tr></table></figure></li>
<li>现在通过之前的链接访问到的博客即为 Hexo 生成的网站内容</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://exudeswarmth.github.io/Jeffz-Android-Record-blog/2020/01/16/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Jeffz-Android-Record-blog/images/avatar.gif">
      <meta itemprop="name" content="Jeffz">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jeffz 自留地博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/Jeffz-Android-Record-blog/2020/01/16/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-16 15:00:52" itemprop="dateCreated datePublished" datetime="2020-01-16T15:00:52+08:00">2020-01-16</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jeffz</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/Jeffz-Android-Record-blog/archives/">
        
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jeffz</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/Jeffz-Android-Record-blog/lib/anime.min.js"></script>
  <script src="/Jeffz-Android-Record-blog/lib/velocity/velocity.min.js"></script>
  <script src="/Jeffz-Android-Record-blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/Jeffz-Android-Record-blog/js/utils.js"></script>

<script src="/Jeffz-Android-Record-blog/js/motion.js"></script>


<script src="/Jeffz-Android-Record-blog/js/schemes/pisces.js"></script>


<script src="/Jeffz-Android-Record-blog/js/next-boot.js"></script>




  















  

  

</body>
</html>
